<!-- Modern Publication Item Template -->
<div class="publication-item">
  <!-- Publication Type Badge -->
  <div class="publication-badge {% if publication.type == 'poster' %}poster-badge{% elsif publication.type == 'oral' %}oral-badge{% elsif publication.type == 'spotlight' %}spotlight-badge{% else %}paper-badge{% endif %}">
    {% if publication.type == 'poster' %}
      Poster Presentation ðŸ“Š
    {% elsif publication.type == 'oral' %}
      Oral Presentation ðŸŽ¤
    {% elsif publication.type == 'spotlight' %}
      Venue Spotlight âš¡
    {% else %}
      Journal Publication ðŸ“„
    {% endif %}
  </div>

  <!-- Publication Content -->
  <div class="publication-content">
    <!-- Year -->
    <div class="publication-year">
      <i class="fas fa-calendar-alt"></i> {{ publication.year }}
    </div>
    
    <!-- Title -->
    <h2 class="publication-title">
      <a href="{{ publication.link1.url | relative_url }}" target="_blank">{{ publication.title }}</a>
    </h2>
    
    <!-- Authors -->
    <div class="publication-authors">
      <i class="fas fa-users"></i> 
      {% assign authors_array = publication.authors | split: ", " %}
      {% for author in authors_array %}
        {% if author contains site.name %}
          <strong>{{ author }}</strong>{% unless forloop.last %}, {% endunless %}
        {% else %}
          {{ author }}{% unless forloop.last %}, {% endunless %}
        {% endif %}
      {% endfor %}
    </div>
    
    <!-- Links Row -->
    <div class="publication-links">
      {% if publication.paper_url %}
        <a href="{{ publication.paper_url | relative_url }}" class="pub-link paper-link" target="_blank">
          <i class="fas fa-file-alt"></i> Paper
        </a>
      {% endif %}
      
      {% if publication.poster_url %}
        <a href="{{ publication.poster_url | relative_url }}" class="pub-link poster-link" target="_blank">
          <i class="fas fa-image"></i> Poster
        </a>
      {% endif %}
      
      {% if publication.code_url %}
        <a href="{{ publication.code_url | relative_url }}" class="pub-link code-link" target="_blank">
          <i class="fab fa-github"></i> Code
        </a>
      {% endif %}
      
      {% if publication.slides_url %}
        <a href="{{ publication.slides_url | relative_url }}" class="pub-link slides-link" target="_blank">
          <i class="fas fa-desktop"></i> Slides
        </a>
      {% endif %}
      
      {% if publication.video_url %}
        <a href="{{ publication.video_url | relative_url }}" class="pub-link video-link" target="_blank">
          <i class="fas fa-video"></i> Video
        </a>
      {% endif %}
      
      {% if publication.location %}
        <span class="pub-location">
          <i class="fas fa-map-marker-alt"></i> {{ publication.location }}
        </span>
      {% endif %}
    </div>
    
    <!-- Abstract Toggle -->
    <div class="abstract-section">
      <button class="abstract-toggle" onclick="toggleAbstract(this)">
        <i class="fas fa-chevron-right"></i> Abstract
      </button>
      <div class="abstract-content">
        <p>{{ publication.abstract }}</p>
        
        {% if publication.venue %}
          <p class="venue-info">
            Accepted at the <a href="{{ publication.venue_url }}" target="_blank">{{ publication.venue }}</a>
            {% if publication.colocated_with %}
              co-located with {{ publication.colocated_with }}
            {% endif %}
          </p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<script>
// Function to toggle abstract visibility
function toggleAbstract(button) {
  // Toggle active class on button
  button.classList.toggle('active');
  
  // Find the abstract content element (next sibling)
  const abstractContent = button.nextElementSibling;
  
  // Toggle display
  if (abstractContent.style.display === 'block') {
    abstractContent.style.display = 'none';
  } else {
    abstractContent.style.display = 'block';
  }
}
</script>